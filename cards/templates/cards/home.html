{% extends 'cards/base.html' %}


{% block content %}
<div class="row" >
    <div class="col-lg-3 col-md-12">
      <p align=center>tags</p>
      <hr>

      <div class="list-group" id="list-tab" role="tablist" >
      {% for tag in tags %}
        {% if forloop.first %}
          <a class="list-group-item list-group-item-action active d-flex justify-content-between align-items-center" id="list-{{ tag.id }}-list" data-toggle="list" href="#list-{{ tag.id }}" role="tab" aria-controls="{{ tag.id }}">{{ tag.title }}

          <span><strong>{{ tag.cards.count }}</strong></span>
          </a>
          {% else %}
          <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" id="list-{{ tag.id }}-list" data-toggle="list" href="#list-{{ tag.id }}" role="tab" aria-controls="{{ tag.id }}">{{ tag.title }}
          <span><strong>{{ tag.cards.count }}</strong></span>
          </a>
        {% endif %}
      {% endfor %}
      </div>
      <br>

    </div>
        <div class="col-lg-9 col-md-12">
        <p align=center>cards</p>
        <hr>
        <div class="tab-content " id="nav-tabContent">

            {% for tag in tags %}

              {% if forloop.first %}
              <div class="tab-pane fade show active" id="list-{{ tag.id }}" role="tabpanel" aria-labelledby="list-{{ tag.id }}-list">
              {% else %}
                <div class="tab-pane fade show" id="list-{{ tag.id }}" role="tabpanel" aria-labelledby="list-{{ tag.id }}-list">
              {% endif %}
              <div class="card-columns">
                

                {% for card in tag.cards.all %}

                <div class="card">
                {% if card.card_image %}
                  <img src="{{ card.card_image.url }}" class="card-img-top" alt="...">
                {% endif %}
                


                  <div class="card-body">
                    <h5 class="card-title">{{ card.title }}</h5>
                    {% if card.description %}
                    <p class="card-text text-muted">{{ card.description }}</p>
                    {% endif %}
                    
                      <button class="btn btn-block btn-sm btn-outline-primary" type="button" data-toggle="collapse" data-target="#collapse_{{ card.id }}" aria-expanded="false" aria-controls="collapse_{{ card.id }}">
                        Go to
                      </button>

                    
                    <div class="collapse" id="collapse_{{ card.id }}">
                      <br>
                      <div class="btn-group btn-block" role="group">
                        <a href="{% url 'card_detail' card.id %}" class="btn btn-sm btn-outline-primary">detail</a>
                        <a href="{% url 'card_detail' card.id %}" class="btn btn-sm btn-outline-secondary">edit</a>
                        <a href="{% url 'card_detail' card.id %}" class="btn btn-sm btn-outline-secondary">delete</a>
                      </div>
                    </div>

                  </div>
                </div>
                {% endfor %}

              </div>
            </div>
            {% endfor %}
          </div>
        </div>
    </div>
</div>
{% endblock %}
